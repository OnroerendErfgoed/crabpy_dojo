<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: Hello Dojo!</title>
</head>
<body>
    <div id="widgetContainer">
        <div id="widgetNode"></div>
        <button id="testButtonNode" type="button"></button>
        <div id="testResult">-</div>
    </div>

    <!-- load Dojo -->
    <script type="text/javascript">
        var dojoConfig = {
            async: true,
            packages: [
                {
                name: 'src',
                location: location.pathname.replace(/[^\/]+$/, '') + '../'
                },
                {
                    name: 'dojo-form-controls',
                    location: location.pathname.replace(/[^\/]+$/, '') + '../bower_components/dojo-form-controls'
                },
                {
                    name: "mijit",
                    location: location.pathname.replace(/[^\/]+$/, '') + "../bower_components/mijit"
                }
            ]
        };
    </script>
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.2/dojo/dojo.js"
            data-dojo-config="async: true"></script>

    <script>
        require([
            "src/CrabpyWidget",
            "dojo-form-controls/Button",
            "dojo/dom",
            "dojo/json"
        ], function (CrabpyWidget, Button, dom, JSON) {
            // init widget
            var widgetUnderTest = new CrabpyWidget({
                name: "location",
                baseUrl: "http://localhost:6543"
            }, 'widgetNode');
            widgetUnderTest.startup();

            var myButton = new Button({
                label: "Get value",
                onClick: function(){
                    // Do something:
                    dom.byId("testResult").innerHTML = JSON.stringify(widgetUnderTest.get('value'));
                }
            }, "testButtonNode").startup();
        });
    </script>
</body>
</html>